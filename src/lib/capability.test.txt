import { Capability } from "./capability"; // Adjust the import path to your file
import { GenericClass, GroupVersionKind } from "kubernetes-fluent-client";
import { expect, test, describe } from "@jest/globals";
describe("Capability", () => {
  describe("When method", () => {
    test("should throw an error if kind is not specified and model is not a KubernetesObject", () => {
      const modelWithoutKind = { name: "TestModel" };
      
      const capability = new Capability({
        name: "TestCapability",
        description: "Test Description",
        namespaces: ["default"],
      });

      expect(() => capability.When(modelWithoutKind as GenericClass)).toThrowError(
        "Kind not specified for TestModel"
      );
    });

    // test("should set deletionTimestamp filter to true when WithDeletionTimestamp is called", () => {
    //   const model: GroupVersionKind = {
    //     kind: "Pod",
    //     version: "v1",
    //     group: "",
    //   };

    //   const capability = new Capability({
    //     name: "TestCapability",
    //     description: "Test Description",
    //     namespaces: ["default"],
    //   });

    //   capability.When(model).IsCreatedOrUpdated().WithDeletionTimestamp();

    //   const binding = capability.bindings[0];

    //   expect(binding.filters.deletionTimestamp).toBe(true);
    // });
  });
});
